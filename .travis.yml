language: php

services:
  - mysql

php:
  - 5.6
  - 7

cache:
  directories:
    - $HOME/.composer/cache

install:
  - nvm install
  - npm install
  - gulp install
  - mysql -e 'CREATE DATABASE test;'
  - cp ci/settings.travis.php web/sites/default/settings.local.php

script:
  - composer validate
  - gulp check
  - gulp build
  # Install site
  - vendor/bin/drush -r web/ si -y

